<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8" />
        <title><%= title %></title>
        <link rel="stylesheet" href="/community.css" />
    </head>

    <body data-user="<%= user %>">
        <header><%- include('./header'); %></header>
        <div class="container">
            <!-- 절약 위키 화면 구현 -->
            <div class="left">
                <div class="header-container">
                    <div class="title-container">
                        <h2 class="title">절약 위키</h2>
                    </div>
                    <div class="edit-container">
                        <button class="btn" id="edit">위키 수정</button>
                    </div>
                </div>
                <form id="wiki-form" style="display: none">
                    <fieldset>
                        <legend>위키 입력</legend>
                        <div><textarea id="wiki" type="text" placeholder="위키 마크다운으로 입력"></textarea></div>
                        <button type="submit">등록</button>
                    </fieldset>
                </form>
                <br />
                <div id="wiki-content"><p id="wikiDate">날짜 넣을거야</p></div>
                <br />
            </div>
            <!--왼쪽 오른쪽 구분 선 -->
            <div class="divider"></div>
            <div class="right">
                <fieldset>
                    <legend>채팅 내용</legend>
                    <div id="chat-list" style="overflow-y: scroll; height: 300px">
                        <% chats.forEach(function(chat) { %> <% if (chat.user === user) { %>
                        <div class="mine" style="color: <%=chat.user%>">
                            <div><%= chat.chat %></div>
                        </div>
                        <% } else { %>
                        <div class="other" style="color: <%=chat.user%>">
                            <div><%= chat.chat %></div>
                        </div>
                        <% } %> <% }); %>
                        <ul id="messages"></ul>
                    </div>
                </fieldset>
                <form id="chat-form">
                    <label for="chat">채팅 메시지</label>

                    <form action="">
                        <input id="m" autocomplete="off" />
                        <button>보내기</button>
                    </form>
                </form>
            </div>
        </div>

        <footer>
            <header><%- include('./footer'); %></header>
        </footer>
        <!-- socket io -->
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>

        <!-- 마크업을 사용 하기위한 모듈 추가 -->
        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script src="/wiki.js"></script>
        <script src="/chat.js"></script>
    </body>
</html>
